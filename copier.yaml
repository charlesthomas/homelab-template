---
name:
  type: str
  help: The name of the app / service you're installing. Used as the default name for every resource generated by this template.

upstreamURL:
  type: str
  help: Upstream URL for use in README.md

namespace:
  type: str
  help: The Kubernetes namespace.
  default: "{{ name }}"

url:
  type: str
  help: The URL of the repo (for the ArgoCD Application CRD).
  default: "https://github.com/charlesthomas/homelab-{{ name }}"
---
!include inc/kustomization.yaml
---
!include inc/helm.yaml
---
!include inc/templatable.yaml
---
!include inc/ingress.yaml
---
!include inc/homepage.yaml
---
!include inc/service.yaml
---
!include inc/pvc.yaml
---
!include inc/backup.yaml
---
_answers_file: .templated.yaml
_subdirectory: tmpl
_templates_suffix: tmpl
_skip_if_exists:
  - .github/dependabot.yml
  - .gitignore
  - README.md
_migrations:
  - version: v1.7.0
    before:
      - mkdir argocd && mv *-argocd-application.yaml argocd/
